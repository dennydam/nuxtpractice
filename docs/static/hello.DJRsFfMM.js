import{u as m,n as f,q as h,c as y,a as p,F as v,o as S,s as T}from"./entry.CtATWCKh.js";import{u as g,a as L}from"./user.DHmg4zsb.js";const u=async(c,e)=>{console.log("request url",c);const t="http://localhost:3000"+c;return new Promise((d,r)=>{g(t,{...e,onRequest({request:a}){const s=m();console.log("changeLoading",s),s.startLoading()},onResponseError({request:a,response:s,options:o}){const n=m();console.log("onResponseError"),n.stopLoading(),console.log("请求失败",s.status,o),r(s)}},"$Ry2YyNY11L").then(({data:a,error:s,refresh:o,status:n})=>{const i=m();if(console.log("onResponseError"),i.stopLoading(),console.log("userFetch計算次數"),s.value){console.log("请求失败",n),r(s.value);return}const l=a.value;console.log("dataValue",a.value),l?(console.log("请求成功",l),d(l)):(console.log("请求失败",l),l==null||l.code)}).catch(a=>{console.log("请求失败",a),r(a)})})},q=new class{get(e,t){return u(e,{method:"get",params:t})}post(e,t){return u(e,{method:"post",body:t})}put(e,t){return u(e,{method:"put",body:t})}delete(e,t){return u(e,{method:"delete",body:t})}},x=c=>(console.log("appointment.ts",c),q.post("/api/appointment",c)),E=f({__name:"hello",setup(c){const{$notify:e}=T(),t=L();async function d(){const{data:o}=await x();console.log("testData",o)}async function r(){console.log("appTest"),console.log("userStore",JSON.parse(JSON.stringify(t)));try{const{data:o}=await g("/api/appointment/",{method:"POST",body:{name:"test",time:"2022-10-10 10:10:10"},onResponse({request:n,response:i,options:l}){console.log("onResponse",i),i.status==400?(console.log("抓"),e({type:"success",title:"Notification Title",text:"Notification Text"})):i.status==200&&e({type:"success",title:"預約成功",text:"預約成功"})}},"$JnL4xucHVx")}catch(o){console.error("An error occurred:",o)}}async function a(){console.log("appTest");const{data:o,error:n}=await g("/api/appointment","$gLqb6S7YlY");n&&console.log("error",n.value),o.value&&console.log("data",o.value)}async function s(){console.log("appTest");const{data:o,error:n}=await g("/api/appointment",{method:"DELETE",body:{id:1}},"$zNygCoyJ3Z");n&&console.log("error",n.value),o.value&&console.log("data",o.value)}return h(()=>{}),(o,n)=>(S(),y(v,null,[p("div",null,[p("button",{onClick:d},"testApi")]),p("div",{onClick:r},"appointment"),p("div",{onClick:a},"getApp"),p("div",{onClick:s},"deleteApp")],64))}});export{E as default};
